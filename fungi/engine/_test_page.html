<!DOCTYPE html><html><head><title>Fungi</title></head><script type="module">

import App			from "./App.js";
import FacedCube	from "../primitives/FacedCube.js";
//import DVerts, { DynamicVertsSystem } from "./ecs/DynamicVerts.js";
//import Debug from "./Debug.js";


//////////////////////////////////////////////////////////////////////
App.launch( onDraw, [
	{ type:"shader", file:"/fungi/shaders/VecWColor.txt" },
])	//.then( ()=>App.loadModules( "./Debug.js" ) )
	.then( ()=>App.loadScene( false ) )
	.then( ()=>init() )
	.catch( (err)=>console.error( err ) );

function init(){
	//DynamicVertsSystem.init( App.ecs );
	//Debug.init( App.ecs );

	App.camera.Node
		.setPos( 0, 1.5, 4 )
		.setRotAxis( [1,0,0], -15 * Math.PI / 180 );


	//App.debug.rawPoint(0, 0.5, 0, 2);
	//App.debug.line( [0,0,0], [0,0.5,0], 0 );

	cube = FacedCube("Cube");
	cube2 = FacedCube("Cube2");
	cube2.Node.setPos(0,1,0).setScl( 0.5 );

	App.node.addChild( cube, cube2 );

	//let gfloor = GridFloor();
	
	//let e = DVerts.build( App.newDraw( "DVE" ), "Points", "VecWColor", 1 );
	//e.Draw.add( vao, material=null, mode=4 );
	
	//DVerts.rawPoint( e, 0, 0.5, 0, 0 )
	//		.rawPoint( e, 0, 0.0, 0, 0 )
	//	;
	//console.log( e );

	//cube.Node.setRotAxis( [0,1,0], 20 * Math.PI / 180 );
	//console.log( cube );

	//console.log( App.node.getWorldRot( cube ) );

	//App.ecs.updateSystems();
	App.loopState( true );
}

let cube, cube2;
function onDraw( dt, ss ){

	cube.Node.setRotAxis( [0,1,0], Math.sin( ss ) * Math.PI );
	cube2.Node.setRotAxis( [0,1,0], Math.sin( ss ) * Math.PI );

	App.ecs.updateSystems();
}



/*

				App.launch(onRender, [
					{ type:"shader", file:"/fungi/shaders/VecWColor.txt" },
				])	.then( ()=>App.loadScene() )
					.then( ()=>onInit() )
					.catch( err=>console.log("err", err) );
*/


//////////////////////////////////////////////////////////////////////


</script><body></body></html>