<!DOCTYPE html><html><head><title></title></head><script type="module">
import App, { AppBuilder }	from "../fungi/engine/App.js";
import Armature from "../fungi.armature/Armature.js";
import Maths	from "../fungi/maths/Maths.js";
import _NA		from "../fungi.misc/MeshLoader.js";


//#############################################################################
(function(){new AppBuilder().launch()
	.load_armature()
	.download( dl=>dl.addGrp( "shader", 
		"../fungi/shaders/VecWColor.txt",
		"../fungi.armature/shaders/ArmaturePreview.txt",
		"../fungi.armature/shaders/ArmatureSkinPhong.txt" )
		.addEntity( "Mesh01", "../files/models/pitohui", "ArmatureSkinPhong", 7, 25, ["body"] )
		//.addEntity( "Mesh01", "../files/models/baller", "ArmatureSkinPhong", 7, 25 )
	)
	.load_scene( true, true )
	.set_camera( -2, 15, 3.0 )
	.add_task( init )
	.render_loop( onDraw )
	.build().catch( (e)=>console.error("error",e) );
})();



//#############################################################################
function onDraw(dt, ss){ App.ecs.sys_run(); }

function init(){
	//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	/*
	let b;
	let e = App.ecs.entity_find( "Mesh01" );
	e.Armature.isModified = true;

	b = Armature.getBone( e.Armature, "bip_hip_L" );
	b.Node.local.rot.rx( Maths.toRad(35) );
	b.Node.isModified = true;
	*/

	//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	return true;
}

//#############################################################################
</script><body></body></html>