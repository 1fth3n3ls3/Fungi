<!DOCTYPE html><html><head><title></title></head><script type="module">
import App, { AppBuilder } from "../fungi/engine/App.js";
import Gltf		from "../fungi.misc/GLTF.js";
import Armature from "../fungi.armature/Armature.js";
import {Quat}	from "../fungi/maths/Maths.js";


//#############################################################################
(function(){new AppBuilder().launch()
	.load_armature()
	.download( dl=>dl.addGrp( "shader", 
		"../fungi/shaders/VecWColor.txt",
		"../fungi.armature/shaders/ArmaturePreview.txt",
		"../fungi.armature/shaders/ArmatureSkinPhong.txt" )
		.addGLTF( "Mesh01", "../files/models/Vegeta", "ArmatureSkinPhong", ["Vegeta"], "Armature" )
		//.addGLTF( "Mesh01", "./dummy", "ArmatureSkinPhong", ["Base"], "CielArmature" )
		//.addGLTF( "Mesh01", "../pitohui", "ArmatureSkinPhong", ["body","skin","eyes","hair"], "armature" )
		//.addGLTF( "Mesh01", "../files/models/baller", "ArmatureSkinPhong", ["Base"], "Armature" )
	)
	.load_scene( true, true )
	.set_camera( -35, 15, 4.0 )
	.add_task( init )
	.render_loop( onDraw )
	.build().catch( (e)=>console.error("error",e) );
})();



//#############################################################################
function onDraw(dt, ss){ App.ecs.sys_run(); }

function init(){
	//App.cameraCtrl.setTarget( 0, 0.75, 0 ).setOrbit( -35, 15, 4 );

	//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	//let b;
	//let e = App.ecs.entity_find( "Mesh01" );
	//e.Node.setScl( 0.05 );
	//e.Armature.isModified = true;
	//console.log( e.Armature.get_bone("root").Node.local.rot.reset() );
	
	/*
	b = Armature.getBone( e.Armature, "bip_hip_L");
	//b.Node.local.rot.pmul( new Quat().setAxisAngle( [-1,0,0], 35 * Math.PI / 180 ) );
	b.Node.local.rot.rx( 35 * Math.PI / 180 );
	b.Node.isModified = true;
	console.log( b );
	*/
	//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
	return true;
}


//#############################################################################
</script><body></body></html>